{
  "hash": "8c818cc9be512d0cc92e313d2338bc41",
  "result": {
    "markdown": "---\ntitle: Extract only stable functions from a tidyverse package\nauthor: \n  - name:\n      given: Layal Christine\n      family: Lettry\n      orcid: 0009-0008-6396-0523\n    affiliations:\n      - id: cynkra\n      - name: cynkra GmbH\n        city: Zurich\n        state: CH\n      - id: unifr\n      - name: University of Fribourg, Dept. of Informatics, ASAM Group\n        city: Fribourg\n        state: CH\ndate: 2023-10-12\ncategories: [tidyverse, now, lifecycle]\nimage: image.jpg\ncitation: \n  url: https://rdiscovery.netlify.app/posts/2023-10-12_now/\nformat:\n  html:\n    toc: true\n    toc-title: Contents\n    toc-location: right\n    number-sections: false\n---\n\n\n*Exploring the now package to write code without any obsolete functions*\n\n# The now package\n\nThanks to [Antoine Fabri](https://x.com/antoine_fabri?s=20)'s [post](https://x.com/antoine_fabri/status/1712063122989547718?s=20), I discovered the package [now](https://github.com/moodymudskipper/now) which allows to remove deprecated, superseded, defunct, questioning or reexported functions from tidyverse packages.\n\nThe [README.md](https://github.com/moodymudskipper/now#readme) file is explains how we can see how many functions remain after having removed all the deprecated, superseded, defunct, questioning or reexported ones. See this table which comes from the [README.md](https://github.com/moodymudskipper/now#readme) .\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nbefore <- sapply(tidyverse_packages(), \\(pkg) length(getNamespaceExports(pkg)))\n\nnow::clean_up_tidyverse(\n  c(\n    \"experimental\", \"superseded\", \"deprecated\", \"defunct\", \"questioning\",\n    \"reexports\"\n  )\n)\n\nafter <- sapply(tidyverse_packages(), \\(pkg) length(getNamespaceExports(pkg)))\n\nleft_join(enframe(before, value = \"before\"), enframe(after, value = \"after\"),\n  by = \"name\"\n) |>\n  filter(after != before) |>\n  mutate(keep_ratio = sprintf(\"%2.0f%%\", 100 * after / before)) |>\n  arrange(keep_ratio) |>\n  knitr::kable()\n```\n\n::: {.cell-output-display}\n|name          | before| after|keep_ratio |\n|:-------------|------:|-----:|:----------|\n|tidyr         |     70|    30|43%        |\n|purrr         |    189|    91|48%        |\n|tibble        |     46|    22|48%        |\n|dplyr         |    293|   148|51%        |\n|rvest         |     40|    23|58%        |\n|ragg          |     10|     6|60%        |\n|pillar        |     45|    28|62%        |\n|broom         |      9|     6|67%        |\n|readxl        |     13|     9|69%        |\n|rlang         |    440|   340|77%        |\n|jsonlite      |     28|    23|82%        |\n|hms           |     12|    10|83%        |\n|googledrive   |     87|    76|87%        |\n|googlesheets4 |     53|    47|89%        |\n|haven         |     28|    26|93%        |\n|readr         |    115|   107|93%        |\n|dbplyr        |    162|   153|94%        |\n|forcats       |     39|    37|95%        |\n|stringr       |     59|    56|95%        |\n|ggplot2       |    536|   512|96%        |\n|lubridate     |    205|   198|97%        |\n|modelr        |     34|    33|97%        |\n:::\n:::\n\n\n# References\n\nI assign the copyright for the content of the code above to [Antoine Fabri](https://x.com/antoine_fabri?s=20).\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}