{
  "hash": "5368bce1aca94f758229b70e0fde6588",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: What are the use cases of using nested versus packed data?\nauthor:\n  - name:\n      given: Layal Christine\n      family: Lettry\n      orcid: 0009-0008-6396-0523\n    affiliations:\n      - id: cynkra\n      - name: cynkra GmbH\n        city: Zurich\n        state: CH\n      - id: unifr\n      - name: University of Fribourg, Dept. of Informatics, ASAM Group\n        city: Fribourg\n        state: CH\ndate: 2024-05-30\ncategories: [nest, unnest, pack, unpack, tidyr, json, constructive]\nimage: image.jpg\ncitation: \n  url: https://rdiscovery.netlify.app/posts/2024-06-01_use-case-pack-nest/\nformat:\n  html:\n    toc: true\n    toc-depth: 6\n    toc-title: Contents\n    toc-location: right\n    number-sections: false\neditor_options: \n  chunk_output_type: console\n---\n\n\n*When would you use nested instead packed data (and vice versa)?*\n\nIn my last [blog post](https://rdiscovery.netlify.app/posts/2024-05-30_pack-nest/), we could see what the difference was between the structure of nested data opposite to packed data. \n\nIn this article, I would like to show when we could use nested and packed data.\n\n*Nested data*\n\nIn the following example, we can nest data from the tibble `palmerpenguins::penguins` with the initial raw tibble `palmerpenguins::penguins_raw`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_nested_tib <-\n  palmerpenguins::penguins |>\n  dplyr::distinct(island) |>\n  dplyr::rename(my_island = island) |>\n  dplyr::mutate(\n    penguins_data = purrr::map(\n      my_island, \\(x) dplyr::filter(palmerpenguins::penguins, island == x)\n    ),\n    penguins_raw_data = purrr::map(\n      my_island, \\(x) dplyr::filter(palmerpenguins::penguins_raw, Island == x)\n    )\n  )\n\ndplyr::glimpse(my_nested_tib)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 3\nColumns: 3\n$ my_island         <fct> Torgersen, Biscoe, Dream\n$ penguins_data     <list> [<tbl_df[52 x 8]>], [<tbl_df[168 x 8]>], [<tbl_df[12…\n$ penguins_raw_data <list> [<tbl_df[52 x 17]>], [<tbl_df[168 x 17]>], [<tbl_df…\n```\n\n\n:::\n:::\n\n\nWe can see that `palmerpenguins::penguins` and `palmerpenguins::penguins_raw` have different dimensions. They have the same number of rows but a different number of columns.\n\nTo remove both lists from our tibble, we can unnest the columns `penguins_data` and `penguins_raw_data`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_unnested_tib <-\n  my_nested_tib |>\n  tidyr::unnest(\n    cols = c(penguins_data, penguins_raw_data)\n  )\ndplyr::glimpse(my_unnested_tib)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 344\nColumns: 26\n$ my_island             <fct> Torgersen, Torgersen, Torgersen, Torgersen, Torg…\n$ species               <fct> Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, …\n$ island                <fct> Torgersen, Torgersen, Torgersen, Torgersen, Torg…\n$ bill_length_mm        <dbl> 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34…\n$ bill_depth_mm         <dbl> 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18…\n$ flipper_length_mm     <int> 181, 186, 195, NA, 193, 190, 181, 195, 193, 190,…\n$ body_mass_g           <int> 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 34…\n$ sex                   <fct> male, female, female, NA, female, male, female, …\n$ year                  <int> 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, …\n$ studyName             <chr> \"PAL0708\", \"PAL0708\", \"PAL0708\", \"PAL0708\", \"PAL…\n$ `Sample Number`       <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 1…\n$ Species               <chr> \"Adelie Penguin (Pygoscelis adeliae)\", \"Adelie P…\n$ Region                <chr> \"Anvers\", \"Anvers\", \"Anvers\", \"Anvers\", \"Anvers\"…\n$ Island                <chr> \"Torgersen\", \"Torgersen\", \"Torgersen\", \"Torgerse…\n$ Stage                 <chr> \"Adult, 1 Egg Stage\", \"Adult, 1 Egg Stage\", \"Adu…\n$ `Individual ID`       <chr> \"N1A1\", \"N1A2\", \"N2A1\", \"N2A2\", \"N3A1\", \"N3A2\", …\n$ `Clutch Completion`   <chr> \"Yes\", \"Yes\", \"Yes\", \"Yes\", \"Yes\", \"Yes\", \"No\", …\n$ `Date Egg`            <date> 2007-11-11, 2007-11-11, 2007-11-16, 2007-11-16,…\n$ `Culmen Length (mm)`  <dbl> 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34…\n$ `Culmen Depth (mm)`   <dbl> 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18…\n$ `Flipper Length (mm)` <dbl> 181, 186, 195, NA, 193, 190, 181, 195, 193, 190,…\n$ `Body Mass (g)`       <dbl> 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 34…\n$ Sex                   <chr> \"MALE\", \"FEMALE\", \"FEMALE\", NA, \"FEMALE\", \"MALE\"…\n$ `Delta 15 N (o/oo)`   <dbl> NA, 8.94956, 8.36821, NA, 8.76651, 8.66496, 9.18…\n$ `Delta 13 C (o/oo)`   <dbl> NA, -24.69454, -25.33302, NA, -25.32426, -25.298…\n$ Comments              <chr> \"Not enough blood for isotopes.\", NA, NA, \"Adult…\n```\n\n\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}